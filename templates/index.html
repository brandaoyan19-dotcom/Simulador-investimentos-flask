<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Nexos Invest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h1>Nexos Invest</h1>
    <p class="subtitle">Simule. Compare. Entenda.</p>

    <form method="POST">
        <div class="campo">
            <label>Quanto você vai investir agora?</label>
            <small>Valor inicial que começa a gerar rendimento.</small>
            <input type="number" name="investimento_inicial" required>
        </div>

        <div class="campo">
            <label>Quanto você pretende investir todo mês?</label>
            <small>Aportes mensais aceleram o crescimento ao longo do tempo.</small>
            <input type="number" name="aporte_mensal" required>
        </div>

        <div class="campo">
            <label>Por quanto tempo (anos)?</label>
            <small>Quanto maior o tempo, maior o efeito dos juros compostos.</small>
            <input type="number" name="anos" required>
        </div>

        <div class="campo">
            <label>Tipo de investimento</label>
            <small>Escolha de acordo com seu perfil e objetivo.</small>
            <select name="tipo" id="tipo" required onchange="mostrarCampos()">
                <option value="">Selecione</option>
                <option value="selic">Tesouro Selic – segurança e liquidez</option>
                <option value="ipca">Tesouro IPCA+ – proteção contra inflação</option>
                <option value="cdb">CDB – rendimento atrelado ao CDI</option>
            </select>
        </div>

        <div class="campo escondido" id="campo-ipca">
            <label>Adicional acima do IPCA (%)</label>
            <small>É o ganho real acima da inflação ao longo do tempo.</small>
            <input type="number" step="0.01" name="ipca_adicional">
        </div>

        <div class="campo escondido" id="campo-cdi">
            <label>Percentual do CDI (%)</label>
            <small>É o percentual que vai fazer seu dinheiro render ao longo do tempo.</small>
            <input type="number" step="1" name="cdi_percentual">
        </div>

        <button type="submit">Simular investimento</button>
    </form>

    {% if resultado %}
    <div class="resultado" id="resultado">
        <h2>Análise do resultado</h2>

        <p><strong>Total investido:</strong> {{ resultado.total_investido }}</p>
        <p><strong>Valor final:</strong> {{ resultado.montante }}</p>
        <p><strong>Ganho percentual:</strong> {{ resultado.percentual }}</p>

        <div class="veredito">
            <strong>Veredito educativo:</strong> {{ resultado.veredito }}
        </div>

        <p class="explicacao">{{ resultado.explicacao }}</p>
        <p class="frase">{{ resultado.frase_final }}</p>
    </div>
    {% endif %}
</div>

<script>
function mostrarCampos() {
    const tipo = document.getElementById("tipo").value;
    document.getElementById("campo-ipca").classList.add("escondido");
    document.getElementById("campo-cdi").classList.add("escondido");

    if (tipo === "ipca") {
        document.getElementById("campo-ipca").classList.remove("escondido");
    }
    if (tipo === "cdb") {
        document.getElementById("campo-cdi").classList.remove("escondido");
    }
}

{% if resultado %}
document.getElementById("resultado").scrollIntoView({ behavior: "smooth" });
{% endif %}
</script>

</body>
</html>