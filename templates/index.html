<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Simulador Financeiro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="app">

    <header>
        <h1>Simulador Financeiro</h1>
        <p>Entenda, simule e decida melhor</p>
    </header>

    <form method="post" class="card">

        <label>Valor inicial</label>
        <input type="number" name="valor_inicial" required>
        <small>Quanto você já tem para começar.</small>

        <label>Aporte mensal</label>
        <input type="number" name="aporte" required>
        <small>Quanto pretende investir todo mês.</small>

        <label>Prazo (anos)</label>
        <input type="number" name="anos" required>
        <small>Por quanto tempo você pretende investir.</small>

        <label>Tipo de investimento</label>
        <select name="tipo" id="tipo" required>
            <option value="">Selecione</option>
            <option value="selic">Tesouro Selic</option>
            <option value="ipca">Tesouro IPCA+</option>
            <option value="cdb">CDB</option>
        </select>

        <div id="ipcaExtra" class="hidden">
            <label>Adicional acima do IPCA (%)</label>
            <input type="number" step="0.1" name="ipca_extra">
            <small>Ganho real acima da inflação.</small>
        </div>

        <div id="cdiExtra" class="hidden">
            <label>Percentual do CDI (%)</label>
            <input type="number" step="1" name="cdi">
            <small>Quanto do CDI o banco paga.</small>
        </div>

        <button type="submit">Simular investimento</button>
    </form>

    {% if resultado %}
    <section class="resultado">
        <h2>{{ resultado.vale }}</h2>
        <p>{{ resultado.explicacao }}</p>

        <div class="grid">
            <div>
                <strong>Total investido</strong>
                <span>R$ {{ resultado.total }}</span>
            </div>
            <div>
                <strong>Valor final</strong>
                <span>R$ {{ resultado.final }}</span>
            </div>
            <div>
                <strong>Rendimento</strong>
                <span>R$ {{ resultado.rendimento }} ({{ resultado.percentual }}%)</span>
            </div>
        </div>
    </section>
    {% endif %}

</div>

<script>
const tipo = document.getElementById("tipo");
const ipca = document.getElementById("ipcaExtra");
const cdi = document.getElementById("cdiExtra");

tipo.addEventListener("change", () => {
    ipca.classList.add("hidden");
    cdi.classList.add("hidden");

    if (tipo.value === "ipca") ipca.classList.remove("hidden");
    if (tipo.value === "cdb") cdi.classList.remove("hidden");
});
</script>

</body>
</html>