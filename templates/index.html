<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Simulador de Investimentos</title>
    <link rel="stylesheet" href="/static/style.css">
    <script>
        function atualizarCampos() {
            const tipo = document.getElementById("tipo").value;

            document.getElementById("campo-ipca").style.display = "none";
            document.getElementById("campo-cdi").style.display = "none";

            if (tipo === "ipca") {
                document.getElementById("campo-ipca").style.display = "block";
            }

            if (tipo === "cdb") {
                document.getElementById("campo-cdi").style.display = "block";
            }
        }
    </script>
</head>

<body onload="atualizarCampos()">
    <div class="container">
        <h1>Simulador de Investimentos</h1>
        <p class="sub">Visual premium â€¢ Educativo â€¢ Simples</p>

        <form method="POST">
            <label>Tipo de investimento</label>
            <select name="tipo" id="tipo" onchange="atualizarCampos()" required>
                <option value="selic">Tesouro Selic</option>
                <option value="cdb">CDB</option>
                <option value="ipca">IPCA+</option>
            </select>

            <label>Valor inicial (R$)</label>
            <input type="number" name="valor_inicial" step="0.01" required>

            <label>Aporte mensal (R$)</label>
            <input type="number" name="aporte" step="0.01" required>

            <label>PerÃ­odo (anos)</label>
            <input type="number" name="anos" required>

            <!-- IPCA -->
            <div id="campo-ipca" style="display:none;">
                <label>IPCA + (% ao ano)</label>
                <input type="number" name="ipca_extra" step="0.01">
            </div>

            <!-- CDI -->
            <div id="campo-cdi" style="display:none;">
                <label>Percentual do CDI (%)</label>
                <input type="number" name="cdi_percentual" step="0.01">
            </div>

            <button type="submit">Simular investimento</button>
        </form>

        {% if resultado %}
    {% if resultado.erro %}
        <div class="erro">{{ resultado.erro }}</div>
    {% else %}
        <div class="resultado">
            <p><strong>Total investido:</strong> R$ {{ resultado.investido }}</p>
            <p><strong>Valor final:</strong> R$ {{ resultado.final }}</p>
            <p><strong>Lucro:</strong> R$ {{ resultado.lucro }}</p>
            <p><strong>Rendimento:</strong> {{ resultado.percentual }}%</p>
            <p><em>{{ resultado.avaliacao }}</em></p>
        </div>
    {% endif %}
{% endif %}

        {% if erro %}
            <div class="erro">{{ erro }}</div>
        {% endif %}

        <p class="dica">ðŸ’¡ Investimentos com constÃ¢ncia tendem a gerar melhores resultados no longo prazo.</p>
    </div>
</body>
</html>