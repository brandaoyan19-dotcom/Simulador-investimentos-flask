<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nexos Invest</title>
  <link rel="stylesheet" href="/static/style.css">
</head>

<body>
  <div class="container">

    <!-- TÍTULO -->
    <h1>Nexos Invest</h1>
    <p class="subtitle">Simule. Compare. Entenda.</p>

    <!-- FORMULÁRIO -->
    <form method="POST">

      <!-- VALOR INICIAL -->
      <label>
        Valor inicial
        <small>Quanto você pretende investir agora</small>
        <input type="number" name="valor_inicial" step="0.01" required>
      </label>

      <!-- APORTE MENSAL -->
      <label>
        Aporte mensal
        <small>Quanto você pretende investir todo mês</small>
        <input type="number" name="aporte_mensal" step="0.01" required>
      </label>

      <!-- PERÍODO -->
      <label>
        Período do investimento
        <small>Por quantos anos você pretende manter o investimento</small>
        <input type="number" name="anos" required>
      </label>

      <!-- OBJETIVO -->
      <label>
        Objetivo do investimento
        <small>Ajuda a avaliar se esse investimento faz sentido para você</small>
        <select name="prazo" required>
          <option value="">Selecione</option>
          <option value="curto">Curto prazo</option>
          <option value="medio">Médio prazo</option>
          <option value="longo">Longo prazo</option>
        </select>
      </label>

      <!-- TIPO DE INVESTIMENTO (POR ÚLTIMO) -->
      <label>
        Tipo de investimento
        <small>Escolha o tipo de aplicação que deseja simular</small>
        <select name="tipo" id="tipo" onchange="mostrarExtras()" required>
          <option value="">Selecione</option>
          <option value="selic">Tesouro Selic</option>
          <option value="ipca">Tesouro IPCA+</option>
          <option value="cdb">CDB</option>
        </select>
      </label>

      <!-- EXTRA: CDI -->
      <div class="extra" id="campo-cdi">
        <label>
          Percentual do CDI
          <small>Indica quanto do CDI esse investimento paga e como isso impacta seu rendimento.</small>
          <input type="number" name="percentual_cdi" step="0.01" placeholder="Ex: 120">
        </label>
      </div>

      <!-- EXTRA: IPCA -->
      <div class="extra" id="campo-ipca">
        <label>
          Adicional acima do IPCA
          <small>Percentual que o investimento paga além da inflação.</small>
          <input type="number" name="adicional_ipca" step="0.01" placeholder="Ex: 5">
        </label>
      </div>

      <!-- BOTÃO -->
      <button type="submit">Simular investimento</button>

    </form>

    <!-- RESULTADO -->
    {% if resultado %}
    <div class="resultado">
      <h2>Análise do resultado</h2>

      <ul>
        <li><strong>Total investido:</strong> R$ {{ resultado.total_investido }}</li>
        <li><strong>Valor final:</strong> R$ {{ resultado.valor_final }}</li>
        <li><strong>Rendimento:</strong> {{ resultado.percentual }}%</li>
      </ul>

      <p><strong>Veredito educativo:</strong> {{ resultado.veredito }}</p>
      <p>{{ resultado.explicacao }}</p>
    </div>
    {% endif %}

  </div>

  <!-- SCRIPT -->
  <script>
    function mostrarExtras() {
      const tipo = document.getElementById("tipo").value;

      document.getElementById("campo-cdi").style.display = "none";
      document.getElementById("campo-ipca").style.display = "none";

      if (tipo === "cdb") {
        document.getElementById("campo-cdi").style.display = "block";
      }

      if (tipo === "ipca") {
        document.getElementById("campo-ipca").style.display = "block";
      }
    }
  </script>

</body>
</html>