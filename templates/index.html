<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Nexos Invest</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">

  <h1>Nexos Invest</h1>
  <p class="subtitle">Simule. Compare. Entenda.</p>

  <form method="POST">

    <label>Quanto você vai investir agora?</label>
    <input type="number" name="inicial" required>

    <label>Quanto você pretende investir todo mês?</label>
    <input type="number" name="aporte" required>

    <label>Por quantos anos você pretende investir?</label>
    <input type="number" name="anos" required>

    <label>Escolha o tipo de investimento</label>
    <select name="tipo" id="tipo" required onchange="mostrarExtras()">
      <option value="">Selecione</option>
      <option value="selic">Tesouro Selic – acompanha os juros</option>
      <option value="ipca">Tesouro IPCA+ – protege da inflação</option>
      <option value="cdb">CDB – rendimento atrelado ao CDI</option>
    </select>

    <div id="ipca_extra" class="extra">
      <label>Qual adicional acima do IPCA? (%)</label>
      <input type="number" step="0.01" name="ipca_extra">
    </div>

    <div id="cdi_extra" class="extra">
      <label>Qual percentual do CDI?</label>
      <input type="number" step="1" name="cdi_percentual">
    </div>

    <button type="submit">Simular investimento</button>
  </form>

  {% if resultado %}
  <div id="resultado" class="resultado">
    <h2>Resultado da simulação</h2>
    <p>{{ resultado.descricao }}</p>

    <ul>
      <li><strong>Total investido:</strong> R$ {{ resultado.investido }}</li>
      <li><strong>Valor final:</strong> R$ {{ resultado.saldo }}</li>
      <li><strong>Rendimento:</strong> R$ {{ resultado.rendimento }} ({{ resultado.percentual }}%)</li>
    </ul>

    <h3>{{ resultado.vale }}</h3>
  </div>
  {% endif %}

</div>

<script>
function mostrarExtras() {
  const tipo = document.getElementById("tipo").value;
  document.getElementById("ipca_extra").style.display = tipo === "ipca" ? "block" : "none";
  document.getElementById("cdi_extra").style.display = tipo === "cdb" ? "block" : "none";
}

const resultado = document.getElementById("resultado");
if (resultado) {
  resultado.scrollIntoView({ behavior: "smooth" });
}
</script>

</body>
</html>