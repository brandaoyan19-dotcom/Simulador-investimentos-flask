<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Simulador Educacional de Investimentos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <main class="container">

        <h1>Simulador de Investimentos</h1>
        <p class="subtitle">
            Compare Tesouro Selic, Tesouro IPCA+ e CDB de forma simples e educativa.
        </p>

        <form method="POST">

            <!-- Tipo de investimento -->
            <div class="field">
                <label>Tipo de investimento</label>
                <select name="tipo" id="tipo" required onchange="ajustarCampos()">
                    <option value="">Selecione</option>
                    <option value="selic">Tesouro Selic</option>
                    <option value="ipca">Tesouro IPCA+</option>
                    <option value="cdb">CDB</option>
                </select>
                <small>Escolha o produto financeiro que deseja simular.</small>
            </div>

            <!-- Valor inicial -->
            <div class="field">
                <label>Valor inicial (R$)</label>
                <input type="number" step="0.01" name="valor_inicial" required>
                <small>Quanto você vai investir hoje.</small>
            </div>

            <!-- Aporte mensal -->
            <div class="field">
                <label>Aporte mensal (R$)</label>
                <input type="number" step="0.01" name="aporte_mensal" required>
                <small>Valor investido todos os meses.</small>
            </div>

            <!-- Período -->
            <div class="field">
                <label>Período (anos)</label>
                <input type="number" name="periodo" required>
                <small>Tempo total do investimento.</small>
            </div>

            <!-- IPCA -->
            <div class="field hidden" id="campo-ipca">
                <label>Adicional acima do IPCA (%)</label>
                <input type="number" step="0.01" name="ipca_extra">
                <small>Ganho real acima da inflação.</small>
            </div>

            <!-- CDI -->
            <div class="field hidden" id="campo-cdb">
                <label>Percentual do CDI (%)</label>
                <input type="number" step="0.01" name="cdi_percent">
                <small>Quanto do CDI esse CDB paga.</small>
            </div>

            <button type="submit">Simular investimento</button>
        </form>

        {% if resultado %}
        <section class="resultado">
            <h2>Resultado da simulação</h2>

            <p><strong>Total investido:</strong> R$ {{ resultado.total_investido }}</p>
            <p><strong>Rendimento:</strong> R$ {{ resultado.rendimento }}</p>
            <p><strong>Valor final:</strong> R$ {{ resultado.valor_final }}</p>
            <p><strong>Ganho percentual:</strong> {{ resultado.percentual_ganho }}%</p>

            <div class="explicacao">
                <p>{{ resultado.explicacao }}</p>
                <p><strong>{{ resultado.vale_a_pena }}</strong></p>
            </div>
        </section>
        {% endif %}

    </main>

    <script>
        function ajustarCampos() {
            const tipo = document.getElementById("tipo").value;
            document.getElementById("campo-ipca").classList.add("hidden");
            document.getElementById("campo-cdb").classList.add("hidden");

            if (tipo === "ipca") {
                document.getElementById("campo-ipca").classList.remove("hidden");
            }

            if (tipo === "cdb") {
                document.getElementById("campo-cdb").classList.remove("hidden");
            }
        }
    </script>
</body>
</html>       