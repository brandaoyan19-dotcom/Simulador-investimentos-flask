<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Simulador Educacional de Investimentos</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h1>Simulador Educacional de Investimentos</h1>
    <p class="subtitulo">Aprenda como o tempo e os aportes fazem seu dinheiro crescer</p>

    <form method="POST">
        <label>Valor inicial (R$)</label>
        <input type="number" step="0.01" name="valor_inicial" required>

        <label>Aporte mensal (R$)</label>
        <input type="number" step="0.01" name="aporte_mensal" required>

        <label>Período (anos)</label>
        <input type="number" name="anos" required>

        <label>Tipo de investimento</label>
        <select name="tipo" required onchange="mostrarCampos(this.value)">
            <option value="">Selecione</option>
            <option value="selic">Tesouro Selic</option>
            <option value="cdi">CDB (CDI)</option>
            <option value="ipca">IPCA+</option>
        </select>

        <div id="campo-cdi" class="campo-extra">
            <label>% do CDI (ex: 110)</label>
            <input type="number" name="percentual_cdi">
        </div>

        <div id="campo-ipca" class="campo-extra">
            <label>IPCA + (% ao ano)</label>
            <input type="number" step="0.01" name="ipca_adicional">
        </div>

        <button type="submit">Simular investimento</button>
    </form>

    {% if resultado %}
    <div class="resultado">
        <h2>Resultado da simulação</h2>
        <p><strong>Total investido:</strong> R$ {{ resultado.total_investido }}</p>
        <p><strong>Valor final:</strong> R$ {{ resultado.valor_final }}</p>
        <p><strong>Lucro:</strong> R$ {{ resultado.lucro }}</p>
        <p><strong>Rendimento:</strong> {{ resultado.rendimento }}%</p>

        <p class="educativo">{{ resultado.descricao }}</p>

        <p class="vale">
            Vale a pena?
            {% if resultado.vale_a_pena %}
            ✅ Sim, principalmente no longo prazo
            {% else %}
            ⚠️ O tempo é essencial para melhorar o resultado
            {% endif %}
        </p>
    </div>
    {% endif %}
</div>

<script>
function mostrarCampos(tipo) {
    document.getElementById("campo-cdi").style.display = tipo === "cdi" ? "block" : "none";
    document.getElementById("campo-ipca").style.display = tipo === "ipca" ? "block" : "none";
}
</script>

</body>
</html>