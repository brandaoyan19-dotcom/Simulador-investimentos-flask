<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Nexos Invest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h1>Nexos Invest</h1>
    <p class="subtitle">Simule. Compare. Entenda.</p>

    <form method="POST">

        <div class="campo">
            <label>Valor inicial</label>
            <small>É o valor que você começa investindo hoje.</small>
            <input type="number" name="investimento_inicial" required>
        </div>

        <div class="campo">
            <label>Aporte mensal</label>
            <small>Quanto você pretende investir todo mês para acelerar o crescimento.</small>
            <input type="number" name="aporte_mensal" required>
        </div>

        <div class="campo">
            <label>Prazo do investimento (em anos)</label>
            <small>O tempo é um dos principais fatores de crescimento do investimento.</small>
            <input type="number" name="anos" required>
        </div>

        <div class="campo">
            <label>Tipo de aplicação</label>
            <small>Escolha de acordo com seu objetivo e perfil de risco.</small>
            <select name="tipo" id="tipo" required onchange="mostrarCampos()">
                <option value="">Selecione uma opção</option>
                <option value="selic">
                    Tesouro Selic — estabilidade e liquidez
                </option>
                <option value="ipca">
                    Tesouro IPCA+ — proteção contra a inflação
                </option>
                <option value="cdb">
                    CDB — rendimento atrelado ao CDI
                </option>
            </select>
        </div>

        <!-- Campo condicional IPCA -->
        <div class="campo escondido" id="campo-ipca">
            <label>Adicional acima do IPCA (%)</label>
            <small>
                É o ganho real que você recebe além da inflação ao longo do tempo.
            </small>
            <input type="number" step="0.01" name="ipca_adicional">
        </div>

        <!-- Campo condicional CDI -->
        <div class="campo escondido" id="campo-cdi">
            <label>Percentual do CDI (%)</label>
            <small>
                É o percentual do CDI que vai fazer seu dinheiro render ao longo do tempo.
            </small>
            <input type="number" step="1" name="cdi_percentual">
        </div>

        <button type="submit">Simular investimento</button>
    </form>

    {% if resultado %}
    <div class="resultado" id="resultado">
        <h2>Análise do resultado</h2>

        <p><strong>Total investido:</strong> {{ resultado.total_investido }}</p>
        <p><strong>Valor final:</strong> {{ resultado.montante }}</p>
        <p><strong>Ganho percentual:</strong> {{ resultado.percentual }}</p>

        <div class="veredito">
            <strong>Veredito educativo:</strong>
            {{ resultado.veredito }}
        </div>

        <p class="explicacao">
            {{ resultado.explicacao }}
        </p>

        <p class="frase">
            {{ resultado.frase_final }}
        </p>
    </div>
    {% endif %}
</div>

<script>
function mostrarCampos() {
    const tipo = document.getElementById("tipo").value;

    document.getElementById("campo-ipca").classList.add("escondido");
    document.getElementById("campo-cdi").classList.add("escondido");

    if (tipo === "ipca") {
        document.getElementById("campo-ipca").classList.remove("escondido");
    }

    if (tipo === "cdb") {
        document.getElementById("campo-cdi").classList.remove("escondido");
    }
}

{% if resultado %}
document.getElementById("resultado").scrollIntoView({ behavior: "smooth" });
{% endif %}
</script>

</body>
</html>